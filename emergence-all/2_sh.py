#人和车的指标对比，计算方法在compare_data里
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import random
from scipy.optimize import curve_fit
from scipy.special import factorial
import time


def log_pdf(x,y):
#    bins=np.logspace(0, 4, 20,base=2)
    bins=np.logspace(0, 3, 30)
    bins2=list(bins)
    bins_all={}
    for i in range(len(bins)-1):
        bins_all[bins[i]]=[]
    widths = (bins[1:] - bins[:-1])
    for i in range(len(x)):
        if(x[i]>=1):
            for j in range(len(bins)):
                if(x[i]<bins[j]):
                    bins_all[bins[j-1]].append(y[i])
                    break
                if(x[i]==bins[j]):
                    bins_all[bins[j]].append(y[i])
                    break
    x_new=[]
    y_new=[]
    for key,value in bins_all.items():
        if(len(value)>0):
#            index_this=bins2.index(key)
#            y_new.append(np.sum(value)/widths[index_this])
            y_new.append(np.mean(value))
            x_new.append(key)
        
    return x_new,y_new

trips_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 
         21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,
         39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56,
         57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 
         75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 
         93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108,
         109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122,
         123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136,
         137, 138, 139, 140, 141, 142, 143, 144, 147, 149, 153, 157, 162]
trips_y=[0.0032798009500113095, 0.003505994118977607, 0.004354218502601221,
         0.004184573625876499, 0.004014928749151775, 0.003732187287943904,
         0.004184573625876499, 0.0042411219181180725, 0.003505994118977607,
         0.005032798009500113, 0.004014928749151775, 0.004636959963809093,
         0.004410766794842796, 0.004919701425016965, 0.005315539470707985,
         0.005881022393123728, 0.005654829224157431, 0.007068536530196788, 
         0.006672698484505768, 0.007011988237955214, 0.008369147251752997, 
         0.009047726758651889, 0.008369147251752997, 0.009556661388826057, 
         0.009273919927618186, 0.008708437005202442, 0.00853879212847772, 
         0.010404885772449673, 0.008991178466410314, 0.010291789187966523,
         0.01063107894141597, 0.011479303325039584, 0.00983940285003393,
         0.010800723818140692, 0.011083465279348564, 0.011648948201764306,
         0.011931689662972178, 0.010291789187966523, 0.00983940285003393, 
         0.011535851617281158, 0.012327527708663199, 0.011309658448314861, 
         0.011196561863831712, 0.012666817462112644, 0.011253110156073286, 
         0.012440624293146347, 0.012723365754354218, 0.012270979416421624, 
         0.012044786247455327, 0.011196561863831712, 0.011535851617281158,
         0.011366206740556436, 0.010744175525899118, 0.012779914046595793,
         0.011931689662972178, 0.013288848676769962, 0.012836462338837368, 
         0.013571590137977834, 0.01340194526125311, 0.012384076000904772, 
         0.012666817462112644, 0.011875141370730605, 0.011253110156073286,
         0.011762044786247455, 0.013175752092286813, 0.012779914046595793, 
         0.01261026916987107, 0.011875141370730605, 0.012101334539696902, 
         0.011309658448314861, 0.012044786247455327, 0.014419814521601447, 
         0.010970368694865415, 0.012553720877629496, 0.010800723818140692, 
         0.011592399909522733, 0.011140013571590139, 0.011931689662972178,
         0.011988237955213752, 0.010009047726758652, 0.011479303325039584, 
         0.010461434064691246, 0.010122144311241801, 0.009160823343135038, 
         0.008878081881927166, 0.009500113096584483, 0.007520922868129383,
         0.009556661388826057, 0.008312598959511423, 0.00802985749830355, 
         0.007238181406921511, 0.006672698484505768, 0.006050667269848451, 
         0.006616150192264194, 0.006333408731056322, 0.005654829224157431, 
         0.005937570685365302, 0.005202442886224836, 0.0044673150870843704,
         0.005315539470707985, 0.005372087762949559, 0.0044673150870843704,
         0.0044673150870843704, 0.004128025333634924, 0.0036190907034607555,
         0.003166704365528161, 0.0037887355801854783, 0.0026577697353539925,
         0.0034494458267360327, 0.0027143180275955667, 0.0023184799819045464,
         0.0023750282741461207, 0.0020922868129382493, 0.001979190228455101,
         0.001470255598280932, 0.0018095453517303778, 0.001470255598280932, 
         0.001979190228455101, 0.0012440624293146346, 0.0018095453517303778, 
         0.0011875141370730603, 0.0009047726758651889, 0.0009613209681067631,
         0.0010178692603483375, 0.0009613209681067631, 0.0007916760913820402,
         0.001130965844831486, 0.0006220312146573173, 0.000735127799140466,
         0.0009613209681067631, 0.00045238633793259444, 0.00022619316896629722,
         0.0003958380456910201, 0.00011309658448314861, 0.00022619316896629722,
         0.00033928975344944584, 0.00011309658448314861, 0.00022619316896629722,
         0.00022619316896629722, 0.00022619316896629722, 0.00011309658448314861,
         0.00011309658448314861, 5.6548292241574305e-05, 0.00016964487672472292,
         0.00011309658448314861, 5.6548292241574305e-05, 0.00011309658448314861, 
         5.6548292241574305e-05, 0.00011309658448314861]
trips_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
          20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36,
          37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54,
          56, 60, 61, 84, 98]
trips_y2=[0.3860548652489667, 0.2002620702243895, 0.12039910296361005, 
          0.07750629098921731, 0.05348970624665893, 0.03748190933152535, 
          0.027341356246007014, 0.02059402584194949, 0.015766588002138284,
          0.012229943804842432, 0.008989921378932684, 0.007409025124841911,
          0.00585094593008853, 0.004807880360379154, 0.004032100342907806,
          0.0030672646909266333, 0.002532693586450578, 0.0021871781164843475,
          0.001822105167086066, 0.0013918406195809485, 0.0011669296061123642, 
          0.0009322398529277546, 0.0007757800174713483, 0.0006779926203110944,
          0.0005443498441920806, 0.0004335241274104593, 0.00040744748816772496,
          0.0003944091685463577, 0.00029662177138610376, 0.00019231521441516618,
          0.00017275773498311538, 0.00014016193592969738, 8.800865744422859e-05,
          8.800865744422859e-05, 6.193201820149419e-05, 6.845117801217779e-05, 
          5.541285839081059e-05, 3.5855378958759794e-05, 5.2153278485468796e-05,
          2.2817059337392596e-05, 1.9557479432050798e-05, 2.6076639242734398e-05,
          1.3038319621367199e-05, 2.6076639242734398e-05, 1.3038319621367199e-05, 
          1.9557479432050798e-05, 9.778739716025399e-06, 3.2595799053417998e-06,
          1.6297899526709e-05, 3.2595799053417998e-06, 3.2595799053417998e-06,
          3.2595799053417998e-06, 3.2595799053417998e-06, 3.2595799053417998e-06,
          3.2595799053417998e-06, 3.2595799053417998e-06, 3.2595799053417998e-06,
          3.2595799053417998e-06]


dis_x1=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 10.5, 11.5, 14.5]
dis_y1=[0.0010744175525899118, 0.04376837819497851, 0.7989708210812033,
        0.1443677900927392, 0.008878081881927166, 0.0016399004750056547,
        0.000565482922415743, 0.0003958380456910201, 0.00011309658448314861,
        0.00011309658448314861, 5.6548292241574305e-05, 5.6548292241574305e-05]
dis_x2=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5,
        14.5, 15.5, 16.5, 17.5, 18.5, 19.5, 20.5, 21.5, 22.5, 23.5, 24.5, 25.5,
        26.5, 27.5, 28.5, 29.5, 30.5, 31.5, 32.5, 33.5, 35.5, 36.5, 42.5, 44.5, 
        47.5, 56.5, 80.5]
dis_y2=[0.10242577936555537, 0.3659334784932918, 0.23472234898366298, 
        0.1243334159093576, 0.0676721384148011, 0.03911821844400694, 
        0.02307782572981994, 0.014384526122273361, 0.009322398529277546,
        0.00568796693482144, 0.004045138662529173, 0.002685893842001643,
        0.0019198925642463199, 0.0012907936425153527, 0.0008507503552942097,
        0.0006128010222042583, 0.00045960076665319373, 0.00038789000873567413,
        0.00019231521441516618, 0.00021513227375255877, 0.00015645983545640638,
        0.00012712361630833017, 8.47490775388868e-05, 7.171075791751959e-05, 
        4.563411867478519e-05, 4.563411867478519e-05, 2.2817059337392596e-05, 
        2.2817059337392596e-05, 9.778739716025399e-06, 6.5191598106835995e-06,
        1.6297899526709e-05, 6.5191598106835995e-06, 1.3038319621367199e-05, 
        3.2595799053417998e-06, 6.5191598106835995e-06, 3.2595799053417998e-06, 
        3.2595799053417998e-06, 6.5191598106835995e-06, 3.2595799053417998e-06,
        3.2595799053417998e-06, 3.2595799053417998e-06]


gy_x=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5,
      13.5, 15.5, 24.5]
gy_y=[0.010574530649174395, 0.019848450576792583, 0.0653698258312599,
      0.15607328658674507, 0.22494910653698258, 0.22726758651888712,
      0.16732639674281838, 0.08092060619769283, 0.03047952951820855, 
      0.011140013571590139, 0.0037887355801854783, 0.0013571590137977834,
      0.0005089346301741688, 0.0002827414612078715, 5.6548292241574305e-05,
      5.6548292241574305e-05]
gy_x2=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5,
       13.5, 14.5, 15.5, 16.5, 17.5, 18.5, 19.5, 20.5, 22.5, 23.5, 24.5, 25.5,
       27.5, 28.5, 30.5, 33.5]
gy_y2=[0.7211722753171571, 0.1083549552133721, 0.05184687797436666,
       0.035711957442924755, 0.026379780173931184, 0.01939776001668905,
       0.013484882068399024, 0.009169198273726482, 0.005909618368384682,
       0.0035399037772011945, 0.002128505678188195, 0.0012875340626100108,
       0.0007105884193645123, 0.00035855378958759795, 0.0002509876527113186,
       0.00011734487659230479, 7.822991772820319e-05, 2.9336219148076197e-05,
       2.9336219148076197e-05, 6.5191598106835995e-06, 3.2595799053417998e-06,
       3.2595799053417998e-06, 3.2595799053417998e-06, 3.2595799053417998e-06,
       6.5191598106835995e-06, 3.2595799053417998e-06, 6.5191598106835995e-06,
       3.2595799053417998e-06, 3.2595799053417998e-06]


days_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
        21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]
days_y=[0.018717484731961095, 0.009782854557792355, 0.01916987106989369,
        0.017021035964713865, 0.022902058357837592, 0.03534268265098394, 
        0.032006333408731054, 0.03194978511648948, 0.030196788057000677, 
        0.02799140465957928, 0.035964713865641255, 0.03720877629495589,
        0.03624745532684913, 0.02968785342682651, 0.0303664329337254, 
        0.031214657317349015, 0.03743496946392219, 0.04252431576566388,
        0.04144989821307397, 0.044333861117394256, 0.045012440624293146,
        0.044899344039809996, 0.04676543768378195, 0.050554173263967425, 
        0.04834878986654603, 0.04342908844152907, 0.03901832164668627, 
        0.03426826509839403, 0.02182764080524768, 0.010461434064691246, 
        0.003901832164668627]
days_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
         19, 20, 21, 22, 23, 24, 25, 26, 27, 29, 30, 31]
days_y2=[0.44440460513449026, 0.20317613465976506, 0.11674511388972189, 
         0.07193566893098817, 0.04644901365112064, 0.031992776770929765,
         0.02226619033338983, 0.016164256750589984, 0.01193658161336167,
         0.008471648173983336, 0.006871194440460513, 0.0050849446523332075,
         0.0036963636126576007, 0.0028619111568901, 0.002161101477241613, 
         0.0016297899526708998, 0.001254938263556593, 0.0009354994328330965, 
         0.0006877713600271197, 0.00040092832835704137, 0.00035855378958759795,
         0.00017601731488845718, 0.0001694981550777736, 9.778739716025399e-05, 
         3.5855378958759794e-05, 1.9557479432050798e-05, 6.5191598106835995e-06,
         3.2595799053417998e-06, 3.2595799053417998e-06, 3.2595799053417998e-06]


unique_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
          20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 
          37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 
          54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 
          71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 
          88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103,
          104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117,
          118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131,
          132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 
          146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159,
          160, 161, 162]
unique_y=[1.0, 1.8431862022012935, 2.631746754725575, 3.3962372047806944,
          4.148796875897318, 4.890439395686772, 5.626707571197036, 6.352342750842925,
          7.070415133998949, 7.784060943451509, 8.488866635249764, 9.192250813368826,
          9.889258752897819, 10.576171991639296, 11.258134229799495, 11.935402076793045,
          12.615978128797083, 13.292665036674817, 13.964705882352941, 14.632437798597755,
          15.301694491339962, 15.97103187125276, 16.63277016257571, 17.29246315247474,
          17.9456012493493, 18.595369639568535, 19.240598006644518, 19.882945164104974,
          20.51559633027523, 21.15711733992855, 21.791707249199945, 22.432609615113492,
          23.05749839090324, 23.688970960967485, 24.323028344837716, 24.95127402771569,
          25.5705205811138, 26.17993079584775, 26.799968806051627, 27.417345244683375,
          28.029168340699076, 28.638504948065755, 29.241789307391702, 29.83988502832023,
          30.43446790176648, 31.05453270208662, 31.668603611657428, 32.28190858498312, 
          32.879746835443036, 33.465482860127246, 34.07548630600987, 34.6594925461546, 
          35.26158340048348, 35.858492503594164, 36.45752733389403, 37.04365122029889, 
          37.63633355393779, 38.231926688539424, 38.84405163391092, 39.434943793350875,
          40.019034753776246, 40.61068316706655, 41.20287975094046, 41.788282290279625,
          42.39523418241578, 42.984722025746215, 43.55691947976034, 44.141842900302116, 
          44.730421216848676, 45.33553905745642, 45.9074382921948, 46.468096143869964,
          47.04034008683068, 47.617735283089615, 48.19874804381847, 48.78540946962, 
          49.364927905004244, 49.963930073025004, 50.53017641597029, 51.099853515625,
          51.68742026027048, 52.23654467168999, 52.80685358255452, 53.31264916467781,
          53.91128526645768, 54.44840092317837, 54.93961605584642, 55.507686676427525,
          56.047210300429185, 56.6510761589404, 57.19525065963061, 57.73904939422181,
          58.24605522682446, 58.717855283706406, 59.27937915742794, 59.772458628841605,
          60.29711055276382, 60.856758574310696, 61.4336917562724, 61.98024316109422,
          62.3936170212766, 62.900621118012424, 63.31106870229008, 63.883384932920535,
          64.4375, 64.92307692307692, 65.34278350515464, 65.80535966149506,
          66.33685800604229, 66.72379367720465, 67.21880650994575, 67.599609375, 
          68.02553191489362, 68.38568129330254, 68.95477386934674, 69.50806451612904,
          70.10882352941177, 70.65605095541402, 70.9247311827957, 71.49027237354086,
          72.08, 72.56372549019608, 73.41489361702128, 73.82456140350877,
          73.92156862745098, 74.30882352941177, 74.68852459016394, 75.02941176470588, 
          75.54945054945055, 75.93589743589743, 76.22950819672131, 76.67924528301887, 
          76.59183673469387, 77.16666666666667, 77.2, 77.88888888888889, 77.5, 
          77.71428571428571, 79.25, 78.25, 79.3125, 80.07142857142857, 80.58333333333333,
          81.45454545454545, 81.0, 81.5, 82.0, 81.66666666666667, 82.0, 82.4, 82.8, 82.8,
          83.2, 87.0, 87.33333333333333, 88.0, 88.33333333333333, 87.5, 87.5, 88.0, 89.0,  89.5]
unique_std=[0.0, 0.36362512374511863, 0.5433883469095621, 0.7001160932770844,
            0.8315087728968774, 0.9532321496201026, 1.066812855795124, 
            1.176778243051034, 1.280050233758705, 1.3782723270378734,
            1.4738111191781291, 1.5696241259829908, 1.6544983714113208, 
            1.7378008470750037, 1.8148151467299543, 1.8932332926240127,
            1.9600443517951405, 2.0359651328728345, 2.11045145079991,
            2.181026236259444, 2.255367637181583, 2.3252656702606775, 
            2.3913129912029145, 2.4633902765188784, 2.5332063629173476, 
            2.598097907119615, 2.6684796599457528, 2.7372075697624823, 
            2.7965219241137826, 2.856555890992953, 2.923974913749532, 
            2.9870257866872745, 3.063930268479238, 3.127636178580032, 
            3.181262126916631, 3.241233988146507, 3.3100052259510697,
            3.3801892703060825, 3.4511770598081037, 3.5236328096430785,
            3.588365780529565, 3.6574314437483806, 3.7300716476886526,
            3.790979124058805, 3.8411972681954287, 3.9030878025119184,
            3.955596939424597, 4.011489093472501, 4.067750792605192, 
            4.125513961525708, 4.185562285329605, 4.25008742764532, 
            4.316797064554876, 4.366466564603706, 4.435843485371516,
            4.491163451238813, 4.537852074271932, 4.590315662683161,
            4.62829134077514, 4.67792003261806, 4.72282260651511, 
            4.775430872517418, 4.831962915900948, 4.889421294122382,
            4.956332930723998, 5.011520889857498, 5.0564341109957756,
            5.094630333511787, 5.145286497903618, 5.1695496664566365,
            5.219652084889012, 5.265226656847338, 5.290340229098989, 
            5.323356615398724, 5.3690862941923045, 5.422026629383678,
            5.442835769333434, 5.475025690088234, 5.524342120550178, 
            5.561098838452912, 5.593212309530396, 5.661872682207978,
            5.7262252542334515, 5.7725469450254945, 5.804654216557215,
            5.820260177542069, 5.833721360646985, 5.885151382998015,
            5.946349009647593, 5.976321143044092, 6.006274522888024, 
            6.076779159151496, 6.087876303805878, 6.125066374031633,
            6.193981455125548, 6.2443069377192835, 6.309663299065734,
            6.368238773914856, 6.366951887292171, 6.3994138173203305, 
            6.433193776876271, 6.424558413780893, 6.473860505930123, 
            6.50615509935815, 6.571422505820182, 6.6233739770782, 
            6.677089964679895, 6.808185941617381, 6.869728758069344, 
            6.917886550588645, 6.982867747223903, 7.060414504291664, 
            7.1094323945295175, 7.219839106921623, 7.182332093101697, 
            7.162660008993853, 7.1617804082446535, 7.313031188869501, 
            7.284150652903118, 7.238092510758284, 7.445971319370556,
            7.505609525949036, 7.351956715179583, 7.184590740319084, 
            6.985072235898144, 6.801291730557677, 6.78967630896664, 
            7.207642842167871, 7.276733562970114, 7.502717018263935,
            7.8560688509531555, 8.01125054404485, 7.904838010569503,
            7.444770189509088, 7.383088784512887, 7.070194786636904, 
            6.902897942168926, 6.942915931555924, 6.905613658466566,
            6.355116049294458, 5.741501872332709, 6.123307762899369, 
            6.356864181514516, 6.329780067465168, 7.399324293474371, 
            7.615773105863909, 7.858116822750856, 5.557777333511023, 
            5.916079783099616, 6.651315659326356, 6.305553108173778, 
            6.305553108173778, 6.49307323229917, 4.242640687119285, 
            3.7712361663282534, 4.242640687119285, 4.496912521077347,
            4.5, 4.5, 5.0, 5.0, 5.5]
unique_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
           21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37,
           38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 
           55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 
           72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84]
unique_y2=[1.0, 1.697803568868761, 2.1959610126622175, 2.5816773361785366, 
           2.8942566240671925, 3.1545954848557884, 3.3853587192143957, 
           3.5925554329286644, 3.782640037315015, 3.952683239091006, 
           4.115379485127384, 4.283589408303367, 4.445749272307538, 
           4.580313418217434, 4.7206036157179145, 4.867118768328446,
           5.025913621262458, 5.170947030497592, 5.291490055428758, 
           5.407496012759171, 5.551177318596828, 5.727219965177017, 
           5.838552540013918, 5.932443703085905, 6.133198789101917, 
           6.245145631067961, 6.435600578871201, 6.704946996466431,
           6.867415730337079, 7.022598870056497, 7.04406779661017, 
           7.2809917355371905, 7.4623115577889445, 7.622093023255814,
           7.813793103448276, 8.182539682539682, 8.514285714285714, 
           8.965909090909092, 8.987012987012987, 9.344262295081966, 
           9.11111111111111, 9.25, 9.3, 9.75, 10.178571428571429,
           10.958333333333334, 12.555555555555555, 12.333333333333334,
           12.571428571428571, 14.88888888888889, 14.875, 15.571428571428571,
           12.833333333333334, 13.0, 13.6, 13.8, 15.5, 15.5, 15.75, 16.5, 
           20.666666666666668, 26.5, 26.5, 26.5, 27.0, 27.5, 27.5, 27.5, 27.5,
           28.0, 28.0, 28.0, 28.5, 28.5, 29.0, 29.0, 29.0, 29.0, 29.0, 29.5,
           30.0, 30.5, 30.5, 30.5]
unique_std2=[0.0, 0.4592099172957628, 0.6879252247870559, 0.8772825735667888,
             1.0448838089528252, 1.193188187502993, 1.3301926246442208, 
             1.4611234963165305, 1.5885809926105114, 1.7108709415669126,
             1.825931682726922, 1.9320329416047342, 2.0491655232637096, 
             2.1522974308534004, 2.2581601205506217, 2.3791409765881033,
             2.5024447893767188, 2.6503866101740816, 2.7632012859613404,
             2.8878242911829766, 2.983439766084062, 3.134977942462925,
             3.204961379731338, 3.2779914032312556, 3.4618313428087486,
             3.449088908564107, 3.6448493138450075, 3.8334878684395637, 
             3.992458488478555, 4.158518318079967, 4.257168279280898, 
             4.4223757507615105, 4.639500133729004, 4.837135928558,
             5.080030147747295, 5.376906518505111, 5.826236693922197,
             6.2694223012758945, 6.315294784933681, 6.530847975222174,
             6.305983832738983, 6.6473679001541655, 6.622688275919379,
             6.949720218189443, 6.782612072838329, 7.294285244095011, 
             7.726018251641097, 7.77746031098127, 8.372696149767203, 
             9.666028075969576, 10.252286330375288, 11.069354644463152,
             9.172725270544674, 9.521904571390467, 10.326664514740468, 
             10.186265262597475, 10.735455276791944, 10.735455276791944,
             11.143944544011335, 11.258330249197702, 10.96458946893235,
             10.5, 10.5, 10.5, 11.0, 11.5, 11.5, 11.5, 11.5, 12.0, 12.0,
             12.0, 12.5, 12.5, 12.0, 12.0, 12.0, 12.0, 12.0, 12.5, 13.0, 
             13.5, 13.5, 13.5]


rank_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
        19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 
        35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
        51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,
        67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82,
        83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96]
rank_y=[0.10194545169979541, 0.07395912029910304, 0.06132956424941792,
        0.053082248288903906, 0.047225662984951705, 0.042719046142497344,
        0.039150610562004334, 0.03622408747065414, 0.03369443479660783, 
        0.03162001949234265, 0.029869738575053744, 0.028296551708342894,
        0.026884221584340035, 0.025586774385963306, 0.024421553674895638,
        0.023319900184426312, 0.022268332680891994, 0.02139301252044084,
        0.020497009381759437, 0.019703976823457436, 0.018943971091069434,
        0.01829132498831011, 0.017716527470911587, 0.017192921264259656, 
        0.0166854381702121, 0.01626185634669863, 0.01590248058396576, 
        0.015532577638328573, 0.015230636114849006, 0.014928358127155086,
        0.014660425115835754, 0.014419175442003595, 0.014182207306308077,
        0.013970123500668757, 0.013752557651352824, 0.013522602764084912,
        0.013317541206154975, 0.013110817984412186, 0.012925315302664664, 
        0.012743140930276382, 0.012561106112276049, 0.012410124252378738, 
        0.012231890945376335, 0.01207528818529766, 0.011913564175010506, 
        0.011769586125614375, 0.011631470056960351, 0.011492128130838554,
        0.011333818816793607, 0.011207320001009685, 0.011068443165889499,
        0.010917952350796147, 0.01077845799489126, 0.010648173615200436, 
        0.01050983865199719, 0.010385732815632657, 0.010258205236380019,
        0.010135905541737216, 0.010017915898765389, 0.009896512797524978,
        0.009779736633239987, 0.009656784149005443, 0.009549589120965617,
        0.009433951151890694, 0.009337653007699249, 0.009211705589042616,
        0.009094171486539465, 0.008989149359837892, 0.008884950713164336,
        0.008788533142250305, 0.008672526912608695, 0.008609415563925431,
        0.008507459862874584, 0.008429195412611404, 0.008357140578993522,
        0.008272786929817864, 0.008191852690063475, 0.008130700501782093, 
        0.008028261010940447, 0.007948525993492, 0.00788292858375894, 
        0.0077740382897833245, 0.007675998643088677, 0.007635858636598709,
        0.007669772546719958, 0.007679373497333574, 0.007636005917243642, 
        0.007565950664384918, 0.007500805672334363, 0.00718708385087428, 
        0.0071223048967270644, 0.00663480798762928, 0.006723268399641587, 
        0.006487780297304107, 0.006487780297304107, 0.006802721088435374]
rank_std=[0.0895507870870668, 0.04625956924713077, 0.032725046958475994,
          0.024347653067822713, 0.019632240371329174, 0.0166324066694004, 
          0.014648271748255351, 0.012933205359771478, 0.0115517100081492, 
          0.010477334617497626, 0.009722401931660017, 0.009053285318777176,
          0.0085901818463143, 0.008178825899008127, 0.00781537449707119, 
          0.00741220746973002, 0.0071152830873310825, 0.006893044166195384, 
          0.006605084331117688, 0.006341073886008066, 0.006029230672626362,
          0.00579500673277746, 0.005597932340486371, 0.005365877327754519, 
          0.005094083086808994, 0.004879513924425659, 0.004681875310797863,
          0.004465305607297733, 0.004285209285748133, 0.004093373912402116,
          0.003915391838542269, 0.003743227571236044, 0.0035894959013860446,
          0.003444532225213164, 0.003292389772209078, 0.003129559034003208,
          0.002991958600543407, 0.0028482886138915683, 0.0027220081482862775, 
          0.002602475303381439, 0.0024888599031095554, 0.0023968291122500192,
          0.0022896641448691864, 0.0022022526788354757, 0.002118662027153728, 
          0.0020449978432436223, 0.001978698551239382, 0.001914633596164439,
          0.0018352154610549014, 0.00177890759747968, 0.00172780180053291, 
          0.001671594714022364, 0.0016164109102768515, 0.0015628538439029737,
          0.0014878090006288961, 0.0014437908612974597, 0.0013882330101171233,
          0.0013480112758848862, 0.0013011800014907193, 0.0012544856146238235,
          0.0012204615338118662, 0.00117189605759376, 0.0011363375834462887, 
          0.0011083076869179951, 0.0010723179615376188, 0.0010360475137121683,
          0.0010025894271395797, 0.0009759141960639134, 0.0009310819982399166,
          0.0008954259138348894, 0.0008624530009445232, 0.0008435599565735665,
          0.0007835960494469026, 0.0007734726771454907, 0.0007730189484504286, 
          0.0007502000385798073, 0.0007312882214517263, 0.0007136265225488549,
          0.0006989785208900176, 0.0006434018354028532, 0.0006752509480007228,
          0.0006517015592905937, 0.0006348285372991649, 0.0006561905288505073, 
          0.0006562281523630766, 0.000663740073050653, 0.0005768741619736326,
          0.0006107311558444632, 0.000659474683232077, 0.0007226182147543762, 
          0.0007614672731254349, 0.00039528667312865124, 0.00042075459272273446, 
          0.00031494079113126737, 0.00031494079113126737, 0.0]
rank_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 
         20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 
         37, 38, 39, 40, 41, 42, 43, 44]
rank_y2=[0.7478611879135434, 0.3375189857169494, 0.20200193531424923,
         0.14319022962462388, 0.11100863626009434, 0.09060582068374042, 
         0.07709703147187343, 0.06807074288026421, 0.060787493259926086,
         0.055282805976534774, 0.05140941674807571, 0.047643677662590214,
         0.044915345949871906, 0.04276623869243952, 0.04033761220766362, 
         0.03928983284362202, 0.03796293087972232, 0.034732302136061516, 
         0.03319852985825758, 0.03188595823684758, 0.029604792112956097,
         0.027213510464504095, 0.02516200242460041, 0.023513336027333787,
         0.023513336027333787, 0.02208987754100536, 0.021983645009960796, 
         0.02125216888374783, 0.02031521110468479, 0.019150440203071783,
         0.015567765567765568, 0.015567765567765568, 0.015567765567765568,
         0.011904761904761904, 0.011904761904761904, 0.011904761904761904,
         0.011904761904761904, 0.011904761904761904, 0.011904761904761904, 
         0.011904761904761904, 0.011904761904761904, 0.011904761904761904, 
         0.011904761904761904, 0.011904761904761904]
rank_std2=[0.264703332801782, 0.12476261368943498, 0.08176355746120481,
           0.05832093659809025, 0.04446034078242534, 0.03489471787845573,
           0.028472872133757123, 0.02404468374805372, 0.020932389258772614,
           0.01883482621072814, 0.016825085849164676, 0.01492950809311463,
           0.013413170165065625, 0.012502241649675585, 0.011195533296216928, 
           0.011313569919662859, 0.011330919713724503, 0.010812026958491972, 
           0.009437632544723712, 0.009136985409162825, 0.007755912547435806,
           0.007196778379000502, 0.00752921797285432, 0.005983887186758529,
           0.005983887186758529, 0.004693648200083029, 0.005061922382777927,
           0.005247601920096895, 0.005480164960201656, 0.005883551561348966, 
           0.003663003663003664, 0.003663003663003664, 0.003663003663003664, 
           0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]


##user_uni=np.loadtxt('C:/python/MobikeData/uni_user2.txt',delimiter=',')
##bike_uni=np.loadtxt('C:/python/MobikeData/uni_bike2.txt',delimiter=',')
#user_uni=np.loadtxt('C:/python/MobikeData/uni_user.txt',delimiter=',')
#bike_uni=np.loadtxt('C:/python/MobikeData/uni_bike.txt',delimiter=',')
#unique_t_x1=user_uni[:,0]
#unique_t_y1=user_uni[:,1]
#unique_t_x2=bike_uni[:,0]
#unique_t_y2=bike_uni[:,1]
#unique_t_x1,unique_t_y1=log_pdf(unique_t_x1,unique_t_y1)
#unique_t_x2,unique_t_y2=log_pdf(unique_t_x2,unique_t_y2)


unique_t_x1=[1.0, 1.6102620275609394, 2.592943797404667, 3.2903445623126686, 4.1753189365604015,
             5.298316906283708, 6.7233575364993365, 8.531678524172808, 10.826367338740546, 
             13.73823795883263, 17.43328822199988, 22.122162910704493, 28.072162039411772, 
             35.62247890262442, 45.20353656360243, 57.36152510448679, 72.7895384398315, 
             92.36708571873861, 117.21022975334806, 148.73521072935117, 188.73918221350976,
             239.5026619987486, 303.9195382313198, 385.6620421163472, 489.3900918477494, 621.0169418915616]
unique_t_y1=[2.0987002437043056, 2.351378279641315, 2.5698775698775695, 2.7358304740119457,
             2.9358498349834985, 3.060874704491726, 3.2031700288184437, 3.381761492475778, 
             3.679195587839656, 3.9323434228060155, 4.410617486224014, 5.1118470002086545, 
             5.976872821746522, 6.6659083941890085, 7.636243710732196, 8.93943823970579, 
             10.44314100057317, 12.108592762838477, 14.179815621574605, 16.60525804987777,
             19.723942132176095, 23.60624112568659, 27.926437214359293, 33.37519399071285, 
             39.4023184580989, 45.63132285888879]
unique_t_std1=[0.600567468672619, 0.7629148332647834, 0.9247745591866514, 1.0278018888545402,
               1.1374519063254103, 1.2302934870813578, 1.3271955363682229, 1.4703568862097, 
               1.622235058908867, 1.643965928822519, 1.798985392843276, 2.076356713248544,
               2.4079064035737607, 2.692627646552869, 3.0770117650854685, 3.514263954629459, 
               3.9939917089723784, 4.6040910591181285, 5.293395126902684, 6.004142144734423, 
               6.848177615043387, 7.895409665262921, 9.002249141552316, 10.376022217392306, 
               11.89169932614013, 13.696762778852802]
unique_t_x2=[1.0, 1.6102620275609394, 2.592943797404667, 3.2903445623126686, 4.1753189365604015,
             5.298316906283708, 6.7233575364993365, 8.531678524172808, 10.826367338740546, 
             13.73823795883263, 17.43328822199988, 22.122162910704493, 28.072162039411772, 
             35.62247890262442, 45.20353656360243, 57.36152510448679, 72.7895384398315, 
             92.36708571873861, 117.21022975334806, 148.73521072935117, 188.73918221350976,
             239.5026619987486, 303.9195382313198, 385.6620421163472, 489.3900918477494, 621.0169418915616]
unique_t_y2=[1.923876683844137, 1.96096810990428, 1.9741295938104448, 2.0183175033921303,
             2.041311754684838, 2.0573701842546064, 2.006977356503423, 1.987880866632367, 
             1.9863909508660302, 1.9888420950721273, 1.9458918267160452, 1.7571348855006457,
             2.171358036451388, 2.1494559429550404, 1.992406861526441, 2.1227864485630676, 
             2.370588858613382, 2.3126700083031957, 2.364990685309881, 2.5304312857529614, 
             2.648248359526831, 2.846063399243651, 2.966331371658057, 3.2367954965425607, 
             3.460147807263348, 3.8647605831447716]
unique_t_std2=[0.37340354220030747, 0.4361825100317875, 0.5109374009532593, 0.5690189058392091,
               0.5931152272754867, 0.6307893071019243, 0.5558868391006027, 0.4630498265723905,
               0.4684965329576202, 0.5442568314462325, 0.6929902033776032, 0.7605076380375073, 
               0.7072030047636163, 0.7474800707539309, 0.8772905726903631, 0.8912928233855189,
               0.9363748673582621, 1.0179089787913131, 1.099173702335017, 1.1825931214017094, 
               1.2873762894841627, 1.4214228205557466, 1.5400180544709416, 1.7241479793360412,
               1.900825101739104, 2.258865455758976]


user_ith=np.loadtxt('C:/python/MobikeData/ith_user.txt',delimiter=',')
bike_ith=np.loadtxt('C:/python/MobikeData/ith_bike.txt',delimiter=',')
ith_x=user_ith[:,0]
ith_y=user_ith[:,1]
ith_x2=bike_ith[:,0]
ith_y2=bike_ith[:,1]


#normal
def func1(x,mu,sigma):
    return np.exp(-((x - mu)**2)/(2*sigma**2)) / (sigma * np.sqrt(2*np.pi))

def func2(x, a,b1,b2,c):
    return a*pow(x+c,-b1)*np.exp((-b2)*x)

#泊松    
def func3(x, a):
    return (a**x/factorial(x)) * np.exp(-a)

#幂律 
def func4(x, a, b):
    return a*pow(x,b)

def func5(x, a,b1,b2):
    return a*pow(x,-b1)*np.exp((-b2)*x)
def func6(x, a, b):
    return a * x + b

def func7(x, a, b):
    return a * np.log(x) + b


f_family='Arial'
size_x=8
size_y=6
alpha_xy=1
fig	=	plt.figure(figsize=(size_x, size_y))
ax1	=	fig.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func1, trips_x[:],trips_y[:],maxfev = 10000)
y777 = [func1(i, *popt) for i in trips_x]
ax1.scatter(trips_x,trips_y,label=r'user, $\mu$=%.2f, $\sigma$=%.2f'%(popt[0],popt[1]),alpha=alpha_xy)
ax1.plot(trips_x,y777,'b-')
popt, pcov = curve_fit(func2, trips_x2[:],trips_y2[:],maxfev = 10000)
y888 = [func2(i, *popt) for i in trips_x2]
ax1.scatter(trips_x2,trips_y2,label=r'bike, $\alpha$=%.2f'%popt[1],alpha=alpha_xy)
ax1.plot(trips_x2,y888,color='orange',linestyle='-')
ax1.text(60, 0.2,r'Shanghai', size = 18,family=f_family)
ax1.set_yscale('log')
ax1.set_xscale('log')
ax1.set_ylim([0.000001,1])
ax1.set_xlim([0.8,200])
ax1.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax1.set_xlabel('log'+r'$_{10}$'+'#trips',size=18,family=f_family)  
ax1.set_ylabel('log'+r'$_{10}P$(#)',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh4.pdf',bbox_inches='tight') 

        
fig2	=	plt.figure(figsize=(size_x, size_y))
ax2	=	fig2.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func1, dis_x1[2:],dis_y1[2:])
y777 = [func1(i, *popt) for i in dis_x1]
ax2.scatter(dis_x1,dis_y1,label=r'user, $\mu$=%.2f, $\sigma$=%.2f'%(popt[0],popt[1]),alpha=alpha_xy)
ax2.plot(dis_x1,y777,'b--')
popt, pcov = curve_fit(func2, dis_x2[3:],dis_y2[3:],maxfev = 10000)
y888 = [func2(i, *popt) for i in dis_x2]
ax2.scatter(dis_x2,dis_y2,label=r'bike, $\alpha$=%.2f'%popt[1],alpha=alpha_xy)
ax2.plot(dis_x2,y888,color='orange',linestyle='-')
ax2.text(30, 0.2,r'Shanghai', size = 18,family=f_family)
ax2.set_yscale('log')
ax2.set_xscale('log')
ax2.set_ylim([0.000001,1])
ax2.set_xlim([0.3,100])
ax2.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax2.set_xlabel('log'+r'$_{10}\langle d \rangle$'+'(km)',size=18,family=f_family) 
ax2.set_ylabel('log'+r'$_{10}P(\langle d \rangle)$',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh6.pdf',bbox_inches='tight')


fig3	=	plt.figure(figsize=(size_x, size_y))
ax3	=	fig3.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func3, gy_x[:-1],gy_y[:-1],maxfev = 100000)
y777 = [func3(i, *popt) for i in gy_x]
ax3.scatter(gy_x,gy_y,label=r'user, $\lambda$=%.2f'%popt[0])
ax3.plot(gy_x,y777,'b-')
popt, pcov = curve_fit(func2, gy_x2[:],gy_y2[:],maxfev = 10000)
y888 = [func2(i, *popt) for i in gy_x2]
ax3.scatter(gy_x2,gy_y2,label=r'bike, $\alpha$=%.2f'%popt[1],alpha=alpha_xy)
ax3.plot(gy_x2,y888,color='orange',linestyle='--')
ax3.text(18, 0.2,r'Shanghai', size = 18,family=f_family)
print(popt)
ax3.set_yscale('log')
ax3.set_xscale('log')
ax3.set_ylim([0.000001,1])
ax3.set_xlim([0.3,50])
ax3.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax3.set_xlabel('log'+r'$_{10}r_g$'+'(km)',size=18,family=f_family) 
ax3.set_ylabel('log'+r'$_{10}P(r_g)$',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh5.pdf',bbox_inches='tight')
            

fig6	=	plt.figure(figsize=(size_x, size_y))
ax6	=	fig6.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func4, rank_x[:],rank_y[:],maxfev = 10000)
y777 = [func4(i, *popt) for i in rank_x]
ax6.errorbar(rank_x,rank_y,fmt="o",yerr = rank_std,label=r'user, $\xi$=%.2f'%-popt[1])
ax6.plot(rank_x,y777,'b-',linewidth=2)
popt, pcov = curve_fit(func4, rank_x2,rank_y2,maxfev = 10000)
y888 = [func4(i, *popt) for i in rank_x2]
ax6.errorbar(rank_x2,rank_y2,fmt="o",yerr = rank_std2,label=r'bike, $\xi$=%.2f'%-popt[1])
ax6.plot(rank_x2,y888,color='orange',linestyle='-',linewidth=2)
ax6.text(40, 0.6,r'Shanghai', size = 18,family=f_family)
ax6.set_yscale('log')
ax6.set_xscale('log')
ax6.set_ylim([0.006,1])
ax6.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax6.set_xlabel('log'+r'$_{10}L$',size=18,family=f_family) 
ax6.set_ylabel('log'+r'$_{10}P(L)$',size=18,family=f_family) 
#plt.savefig('C:/python/摩拜单车/draw2/2_sh2.pdf',bbox_inches='tight')


fig7	=	plt.figure(figsize=(size_x, size_y))
ax7	=	fig7.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func4, unique_t_x1[10:],unique_t_y1[10:])
y777 = [func4(i, *popt) for i in unique_t_x1[0:]]
#ax7.scatter(unique_t_x1,unique_t_y1,label=r'user, $\mu$=%.2f'%popt[1],alpha=alpha_xy)
ax7.errorbar(unique_t_x1,unique_t_y1,fmt="o",yerr = unique_t_std1,label=r'user, $\epsilon$=%.2f'%popt[1],alpha=alpha_xy)
ax7.plot(unique_t_x1[0:],y777,'b-')
popt, pcov = curve_fit(func4, unique_t_x2[10:],unique_t_y2[10:])
y888= [func4(i, *popt) for i in unique_t_x2[0:]]
#ax7.scatter(unique_t_x2,unique_t_y2,label=r'bike, $\mu$=%.2f'%popt[1],alpha=alpha_xy)
ax7.errorbar(unique_t_x2,unique_t_y2,fmt="o",yerr = unique_t_std2,label=r'bike, $\epsilon$=%.2f'%popt[1],alpha=alpha_xy)
ax7.plot(unique_t_x2[0:],y888,c='orange',linestyle='-')
ax7.plot([24,24],[1,100],color='k',linestyle='--')
ax7.plot([168,168],[1,100],color='k',linestyle='--')
ax7.plot([720,720],[1,100],color='k',linestyle='--')
ax7.text(19, 70,r'Day', size = 18,family=f_family)
ax7.text(120, 70,r'Week', size = 18,family=f_family)
ax7.text(400, 70,r'Month', size = 18,family=f_family)
ax7.set_yscale('log')
ax7.set_xscale('log')
ax7.set_xlim([1,1000])
ax7.set_ylim([1.6,100])
ax7.legend(loc=2,handletextpad=0.1,prop={'size':18,'family':f_family})
ax7.set_xlabel('t(h)',size=18,family=f_family) 
ax7.set_ylabel(r'S(t)',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh1.pdf',bbox_inches='tight')


fig8	=	plt.figure(figsize=(size_x, size_y))
ax8	=	fig8.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func5, ith_x[:], ith_y[:],maxfev = 10000)
y777 = [func5(i, *popt) for i in ith_x]
ax8.scatter(ith_x,ith_y,label=r'user, $\alpha$=%.2f'%popt[1])
ax8.plot(ith_x,y777,color='blue',linestyle='-')
cut=15
popt, pcov = curve_fit(func5, ith_x2[0:],ith_y2[0:],maxfev = 1000000)
y888 = [func5(i, *popt) for i in ith_x2]
ax8.scatter(ith_x2,ith_y2,label=r'bike, $\alpha$=%.2f'%popt[1])
ax8.plot(ith_x2,y888,color='orange',linestyle='-')
ax8.text(110, 0.55,r'Shanghai', size = 18,family=f_family)
ax8.set_ylim([-0.04,0.64])
#ax8.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
#ax8.set_yscale('log')
#ax8.set_xscale('log')
#ax8.set_ylim([0.0000001,1])
#ax8.set_xlim([0.5,200])
ax8.set_xlabel(r'i$^{th}$ trip',size=18,family=f_family)  
ax8.set_ylabel(r'$P(i)$',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh3.pdf',bbox_inches='tight')








#fig4	=	plt.figure(figsize=(size_x, size_y))
#ax4	=	fig4.add_subplot(1,	1,	1)
#plt.yticks(fontproperties = f_family)
#plt.xticks(fontproperties = f_family) 
#plt.tick_params(labelsize=18)
#popt, pcov = curve_fit(func1, days_x,days_y)
#y777 = [func1(i, *popt) for i in days_x]
#ax4.scatter(days_x,days_y,label=r'user, $\mu$=%.2f, $\sigma$=%.2f'%(popt[0],popt[1]),alpha=0.6)
#ax4.plot(days_x,y777,'b-')
#popt, pcov = curve_fit(func2, days_x2[:],days_y2[:],maxfev = 10000)
#y888 = [func2(i, *popt) for i in days_x2]
#ax4.scatter(days_x2,days_y2,label=r'bike, $\alpha$=%.2f'%popt[1],alpha=0.6)
#ax4.plot(days_x2,y888,color='orange',linestyle='-')
#ax4.set_yscale('log')
#ax4.set_xscale('log')
#ax4.set_ylim([0.0000001,1])
#ax4.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
#ax4.set_xlabel('#Active Days',size=18,family=f_family) 
#ax4.set_ylabel(r'$P$(#)',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh7.pdf',bbox_inches='tight')
#
#
#fig5	=	plt.figure(figsize=(size_x, size_y))
#ax5	=	fig5.add_subplot(1,	1,	1)
#plt.yticks(fontproperties = f_family)
#plt.xticks(fontproperties = f_family) 
#plt.tick_params(labelsize=18)
#ax5.errorbar(unique_x,unique_y,fmt="o",yerr = unique_std,label='user')
#ax5.errorbar(unique_x2,unique_y2,fmt="o",yerr = unique_std2,label='bike')
##popt, pcov = curve_fit(func6, unique_x,unique_y,maxfev = 10000)
##y777 = [func6(i, *popt) for i in unique_x]
##ax5.plot(unique_x,y777,'g-',linewidth=2)
##popt, pcov = curve_fit(func7, unique_x,unique_y,maxfev = 10000)
##y888 = [func7(i, *popt) for i in unique_x]
##ax5.plot(unique_x,y888,'r--',linewidth=2)
#ax5.plot([0,180],[0,180],'k-',linewidth=2)      
#ax5.set_ylim([0,180])
#ax5.set_xlim([0,180])
#ax5.legend(loc=2,handletextpad=0.1,prop={'size':18,'family':f_family})
#ax5.set_xlabel('#trips',size=18,family=f_family)  
#ax5.set_ylabel('#Unique Locations',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/2_sh8.pdf',bbox_inches='tight')



