#人和车的指标对比
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import random
from scipy.optimize import curve_fit
from scipy.special import factorial
import time


def log_pdf(x,y):
#    bins=np.logspace(0, 4, 20,base=2)
    bins=np.logspace(0, 3, 30)
    bins2=list(bins)
    bins_all={}
    for i in range(len(bins)-1):
        bins_all[bins[i]]=[]
    widths = (bins[1:] - bins[:-1])
    for i in range(len(x)):
        if(x[i]>=1):
            for j in range(len(bins)):
                if(x[i]<bins[j]):
                    bins_all[bins[j-1]].append(y[i])
                    break
                if(x[i]==bins[j]):
                    bins_all[bins[j]].append(y[i])
                    break
    x_new=[]
    y_new=[]
    for key,value in bins_all.items():
        if(len(value)>0):
#            index_this=bins2.index(key)
#            y_new.append(np.sum(value)/widths[index_this])
            y_new.append(np.mean(value))
            x_new.append(key)
        
    return x_new,y_new

trips_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 
         22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
         41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,
         60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,
         79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 
         98, 100, 101, 103, 108]
trips_y=[0.013215312390130912, 0.009947676462680702, 0.010030401422869316, 
         0.010857651024755444, 0.010816288544661138, 0.0131325874299423, 
         0.013959837031828428, 0.014125286952205654, 0.015428205075176308,
         0.016958616838665647, 0.01602796103654375, 0.01722747295927864, 
         0.01807540380121192, 0.019833309205219946, 0.018385622401919217,
         0.01972990300498418, 0.020743283767294687, 0.02165325832936943, 
         0.02198415817012388, 0.023018220172481542, 0.022273695530784027,
         0.02128099600852067, 0.023866151014414826, 0.022708001571774244, 
         0.02231505801087833, 0.023411163733377455, 0.022377101731019793, 
         0.022087564370359646, 0.022956176452340084, 0.02165325832936943,
         0.02128099600852067, 0.02152917088908651, 0.021570533369180817, 
         0.02088805244762476, 0.02088805244762476, 0.0182615349616363, 
         0.018757884722767976, 0.018158128761400532, 0.018034041321117616,
         0.01786859140074039, 0.01735156039956156, 0.015014580274233243,
         0.015428205075176308, 0.014787086633714558, 0.014042561992017042,
         0.012863731309329307, 0.011933075507207413, 0.011085144665274129, 
         0.011229913345604203, 0.009658139102020557, 0.010092445143010775,
         0.008231133538766984, 0.008375902219097058, 0.008355220979049904, 
         0.007341840216739396, 0.007155709056315017, 0.00647322813475896, 
         0.005625297292825678, 0.00589415341343867, 0.004736003970798089,
         0.004363741649949331, 0.004529191570326557, 0.0037019419684404275, 
         0.0035571732881103553, 0.0039087543689119595, 0.002916054846648605,
         0.002378342605422621, 0.00262651748598846, 0.0021508489649039357, 
         0.002068124004715323, 0.0014063243232064196, 0.0017785866440551776,
         0.001199511922734887, 0.001261555642876347, 0.0014270055632535728,
         0.0009720182822162016, 0.001096105722499121, 0.0006204372014145969,
         0.0006617996815089033, 0.0005790747213202903, 0.0004963497611316774,
         0.0005170310011788307, 0.00026885612061299197, 0.0005377122412259839,
         0.0002274936405186855, 0.00028953736066014517, 0.00026885612061299197, 
         0.00012408744028291936, 0.00018613116042437905, 0.00012408744028291936,
         0.00014476868033007259, 0.00014476868033007259, 0.00010340620023576614, 
         4.1362480094306454e-05, 8.272496018861291e-05, 6.204372014145968e-05, 
         6.204372014145968e-05, 4.1362480094306454e-05, 2.0681240047153227e-05, 
         2.0681240047153227e-05, 2.0681240047153227e-05, 2.0681240047153227e-05]
trips_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 
          21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,
          39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 
          57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 
          75, 76, 78, 82, 86, 89, 93, 145]
trips_y2=[0.012636722542230276, 0.01247492071710569, 0.013461911850365672, 0.015484434664423015,
          0.016665587987832502, 0.01812180441395379, 0.01990162449032425, 0.019108795547213772,
          0.021762345479257005, 0.0238819493883891, 0.025127823441848423, 0.025499967639634975,
          0.027668112096304445, 0.028946346514788685, 0.029722995275386705, 0.03127629279658275,
          0.03185877936703126, 0.033023752507928286, 0.03342825707073976, 0.03430198692641253,
          0.033557698530839425, 0.033557698530839425, 0.03346061743576467, 0.03221474338230535,
          0.03260306776260436, 0.029868616917998834, 0.029965698013073586, 0.02747394990615494,
          0.02697236424826872, 0.025677949647272023, 0.022765516795029448, 0.021924147304381594, 
          0.02067827325092227, 0.01825124587405346, 0.01668176817034496, 0.014481263348650573, 
          0.01373697495307747, 0.01247492071710569, 0.010517118633098182, 0.009352145492201152,
          0.008025370526179536, 0.007264901948093975, 0.006795676655232671, 0.005485081871723513,
          0.004837874571225163, 0.00449809073846353, 0.003867063620477639, 0.0029286130347550322,
          0.002799171574655362, 0.0024108471943563524, 0.0019254417189825902, 0.0015371173386835803,
          0.0012782344184842406, 0.0011002524108471943, 0.0008575496731603133, 0.0005501262054235971,
          0.0006633874830108084, 0.0005177658403986797, 0.00033978383276163355, 0.0003074234677367161,
          0.0003074234677367161, 0.0001941621901495049, 0.00017798200763704614, 0.0001618018251245874,
          3.236036502491748e-05, 8.09009125622937e-05, 0.00011326127758721118, 3.236036502491748e-05, 
          4.8540547537376224e-05, 3.236036502491748e-05, 3.236036502491748e-05, 3.236036502491748e-05, 
          1.618018251245874e-05, 3.236036502491748e-05, 3.236036502491748e-05, 1.618018251245874e-05,
          1.618018251245874e-05, 1.618018251245874e-05, 1.618018251245874e-05, 1.618018251245874e-05, 
          1.618018251245874e-05, 1.618018251245874e-05]


dis_x1=[0.25, 0.75, 1.25, 1.75, 2.25, 2.75, 3.25, 3.75, 4.25, 4.75, 5.25, 5.75, 6.25, 
        6.75, 7.25, 8.25, 8.75, 9.25, 24.25, 33.25]
dis_y1=[0.03383450871714268, 0.3534217111658015, 0.5245176100759001, 0.07532107625173205,
        0.008541352139474283, 0.002543792525799847, 0.0009306558021218952, 0.00026885612061299197, 
        0.0002274936405186855, 4.1362480094306454e-05, 0.00010340620023576614, 4.1362480094306454e-05,
        6.204372014145968e-05, 2.0681240047153227e-05, 2.0681240047153227e-05, 2.0681240047153227e-05,
        2.0681240047153227e-05, 2.0681240047153227e-05, 2.0681240047153227e-05, 2.0681240047153227e-05]
dis_x2=[0.25, 0.75, 1.25, 1.75, 2.25, 2.75, 3.25, 3.75, 4.25, 4.75, 5.75, 6.25, 6.75, 7.75, 8.25]
dis_y2=[0.04106530321662028, 0.6006569154100059, 0.32141932560999287, 0.029367031260112614, 
        0.004837874571225163, 0.001440036243608828, 0.000501585657886221, 0.000372144197786551, 
        0.00014562164261212868, 9.708109507475245e-05, 1.618018251245874e-05, 1.618018251245874e-05,
        3.236036502491748e-05, 1.618018251245874e-05, 1.618018251245874e-05]


gy_x=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5, 15.5, 16.5, 19.5, 20.5]
gy_y=[0.13366285442475132, 0.3283974107087461, 0.31722954108328333, 0.13734411515314457, 
      0.051041300436374164, 0.019212872003805347, 0.008479308419332823, 0.0026058362459413066,
      0.0011788306826877339, 0.00041362480094306455, 0.0002274936405186855, 4.1362480094306454e-05, 
      6.204372014145968e-05, 2.0681240047153227e-05, 2.0681240047153227e-05, 2.0681240047153227e-05,
      2.0681240047153227e-05, 2.0681240047153227e-05]
gy_x2=[0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5, 14.5, 17.5]
gy_y2=[0.05308717882337713, 0.20899941751342954, 0.33282635428127627, 0.24153776454598408,
       0.10622289819429163, 0.036906996310918386, 0.013332470390266003, 0.004676072746100576,
       0.0013429551485340755, 0.0007281082130606433, 0.0001618018251245874, 9.708109507475245e-05,
       3.236036502491748e-05, 1.618018251245874e-05, 1.618018251245874e-05, 1.618018251245874e-05]


days_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
        21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]
days_y=[0.018717484731961095, 0.009782854557792355, 0.01916987106989369,
        0.017021035964713865, 0.022902058357837592, 0.03534268265098394, 
        0.032006333408731054, 0.03194978511648948, 0.030196788057000677, 
        0.02799140465957928, 0.035964713865641255, 0.03720877629495589,
        0.03624745532684913, 0.02968785342682651, 0.0303664329337254, 
        0.031214657317349015, 0.03743496946392219, 0.04252431576566388,
        0.04144989821307397, 0.044333861117394256, 0.045012440624293146,
        0.044899344039809996, 0.04676543768378195, 0.050554173263967425, 
        0.04834878986654603, 0.04342908844152907, 0.03901832164668627, 
        0.03426826509839403, 0.02182764080524768, 0.010461434064691246, 
        0.003901832164668627]
days_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
         19, 20, 21, 22, 23, 24, 25, 26, 27, 29, 30, 31]
days_y2=[0.44440460513449026, 0.20317613465976506, 0.11674511388972189, 
         0.07193566893098817, 0.04644901365112064, 0.031992776770929765,
         0.02226619033338983, 0.016164256750589984, 0.01193658161336167,
         0.008471648173983336, 0.006871194440460513, 0.0050849446523332075,
         0.0036963636126576007, 0.0028619111568901, 0.002161101477241613, 
         0.0016297899526708998, 0.001254938263556593, 0.0009354994328330965, 
         0.0006877713600271197, 0.00040092832835704137, 0.00035855378958759795,
         0.00017601731488845718, 0.0001694981550777736, 9.778739716025399e-05, 
         3.5855378958759794e-05, 1.9557479432050798e-05, 6.5191598106835995e-06,
         3.2595799053417998e-06, 3.2595799053417998e-06, 3.2595799053417998e-06]


rank_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 
        22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
        41, 42, 43, 44]
rank_y=[0.27964052866853817, 0.165840316022192, 0.11987120562635854, 0.0933038625735998, 
        0.07569248391827338, 0.06328706614187585, 0.053953508806953994, 0.046808465229901085,
        0.04138839011280562, 0.037088486104465634, 0.03363110533020463, 0.030763777097742955,
        0.02845809392109886, 0.026573413171138233, 0.025015886269829878, 0.02367292939811284,
        0.022549831069613314, 0.021535820351614953, 0.020732615979174487, 0.0200120481487735, 
        0.01935061130485162, 0.01877781870777016, 0.018311022556926182, 0.017870635175018964,
        0.017410674378754497, 0.017015479033698936, 0.016682208784733293, 0.016452470805320363,
        0.016099792485907028, 0.01569500962295473, 0.015308449586382989, 0.015000016126512012, 
        0.014886032176324131, 0.014326522055000285, 0.014036036268054504, 0.014130218038988875,
        0.013794513753355398, 0.01376254061197398, 0.013837770837127958, 0.013251697075226486, 
        0.012717864923747277, 0.012717864923747277, 0.012826797385620915, 0.013888888888888888]
rank_std=[0.17392256452592694, 0.06857267250910726, 0.04087389745032082, 0.028699282937338092,
          0.022141206364880244, 0.018333946141591617, 0.015536697767276396, 0.013657428418483233,
          0.012130332716256874, 0.010762512738713452, 0.009725935184979375, 0.008761603686426245, 
          0.007918528721529228, 0.007291540390737331, 0.006720508528452779, 0.006173546043999535, 
          0.005680380015304412, 0.0052048918294220784, 0.00482708801476645, 0.004515478489656194, 
          0.004181570788126771, 0.003906244887508401, 0.003715651098075381, 0.003469950382898942,
          0.003245832616018567, 0.0030451851236660775, 0.002873734855597961, 0.0027850722495409716,
          0.0026320760831260426, 0.0024857913797626556, 0.002395468861275808, 0.002255385404625214, 
          0.0022111542901552786, 0.0020156251766606697, 0.0019521803903019613, 0.0019216949043415802,
          0.0016268323340349988, 0.00142994524155583, 0.0014009930124830032, 0.0009514251924325957, 
          0.0008807713305444566, 0.0008807713305444566, 0.0010620915032679736, 0.0]
rank_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 
         24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43]
rank_y2=[0.2311449753533166, 0.14863366347944185, 0.11354279103802553, 0.09226440099093798, 
         0.07768059915788957, 0.06698612235186288, 0.0588108687456342, 0.05246711031084796, 
         0.04747953320334641, 0.04374345236051036, 0.04081040968880325, 0.03838905822976373, 
         0.0363546736991003, 0.034612605121708426, 0.03305604700495939, 0.03163577527564941,
         0.030321825887026293, 0.029182862880008112, 0.02814404571227835, 0.0271586747336815,
         0.02624308199671565, 0.025309108821841206, 0.024422225119756703, 0.023689788585793327,
         0.022963339168347315, 0.022292016414498298, 0.021634126501944462, 0.021118687782799052,
         0.02048051537670434, 0.01986360154157764, 0.019355078619391165, 0.018853751031548637,
         0.0188367871886864, 0.018668449479900383, 0.018477321933148636, 0.01814810245783562, 
         0.01775663836963357, 0.015605158730158731, 0.015595238095238096, 0.013333333333333334, 
         0.013333333333333334, 0.013333333333333334, 0.013333333333333334]
rank_std2=[0.1492268654754741, 0.0673163432591218, 0.04358816322500733, 0.03222797692858612,
           0.025801526004809693, 0.02171509385619134, 0.018584919124910382, 0.01637122108130092,
           0.014494703341595569, 0.012936711383777008, 0.01164403622738567, 0.01056560460484385, 
           0.00955489011192747, 0.008649893207189325, 0.00784550532588413, 0.007147388856081205, 
           0.006489451287809265, 0.005981499617790109, 0.005560891922850892, 0.00514890824258591,
           0.004821499729430699, 0.004454545645078436, 0.004140376783192312, 0.0038954317692797744, 
           0.0036284988044273155, 0.0034180974373986786, 0.0032129746337572654, 0.0030405709642849586,
           0.002808042597828172, 0.0024983876927322513, 0.002455115018958442, 0.0022885441073455734,
           0.002256638972531328, 0.002318005790671523, 0.0023446627657971644, 0.002666965698063162,
           0.0023303652179363075, 0.0018468907942664286, 0.002261904761904761, 0.0, 0.0, 0.0, 0.0]


ith_x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
       24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 
       45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65,
       66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 79, 80, 81, 82, 83, 84, 86, 87, 89, 
       91, 92, 93, 94, 96]
ith_y=[0.06553884970942858, 0.05211672491882613, 0.04682232746675491, 0.04295493557793725,
       0.04216904845614543, 0.03902549996897814, 0.03966661841043989, 0.03497197691973611,
       0.03327611523586954, 0.0330279403553037, 0.03114594751101276, 0.02986371062808926,
       0.02876760490559014, 0.02690629330134635, 0.02531383781771555, 0.024527950695923728,
       0.024072963414886357, 0.02146712716894505, 0.02090873368767191, 0.021549852129133663,
       0.019916034165408558, 0.018158128761400532, 0.017951316360929, 0.01679316691828842,
       0.01480776787376171, 0.015428205075176308, 0.014125286952205654, 0.013215312390130912,
       0.013173949910036606, 0.012698281388952081, 0.012077844187537485, 0.010340620023576613,
       0.011023100945132671, 0.010733563584472526, 0.009492689181643331, 0.008355220979049904, 
       0.007424565176928009, 0.007114346576220711, 0.007052302856079251, 0.00647322813475896, 
       0.005625297292825678, 0.005563253572684218, 0.004860091411081008, 0.0051082662916468475, 
       0.004363741649949331, 0.0035158108080160485, 0.003929435608959113, 0.003453767087874589, 
       0.0033296796475916694, 0.002254255165139702, 0.0027919674063656857, 0.0024817488056583874, 
       0.002523111285752694, 0.0019853990445267097, 0.0016544992037722582, 0.0017579054040080242, 
       0.0014683680433478792, 0.0013235993630178065, 0.0013235993630178065, 0.0015097305234421856,
       0.0008479308419332823, 0.0009926995222633548, 0.0008479308419332823, 0.0005790747213202903, 
       0.0008892933220275888, 0.0006411184414617501, 0.0006204372014145969, 0.0003929435608959113,
       0.0003929435608959113, 0.00031021860070729843, 0.0002274936405186855, 0.0003515810808016049,
       0.00020681240047153228, 0.00031021860070729843, 0.00014476868033007259, 6.204372014145968e-05,
       0.00016544992037722582, 6.204372014145968e-05, 6.204372014145968e-05, 0.00010340620023576614, 
       0.00010340620023576614, 8.272496018861291e-05, 6.204372014145968e-05, 6.204372014145968e-05, 
       4.1362480094306454e-05, 4.1362480094306454e-05, 2.0681240047153227e-05, 4.1362480094306454e-05, 
       2.0681240047153227e-05, 2.0681240047153227e-05, 2.0681240047153227e-05]
ith_x2=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
        24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 
        45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 60, 61, 65, 66, 69]
ith_y2=[0.08509157983302051, 0.07065885703190732, 0.06303799106853926, 0.05928418872564883, 
        0.054672836709598084, 0.050643971263995856, 0.04944663775807391, 0.04401009643388777,
        0.04190667270726814, 0.040385735551097014, 0.038379392919552134, 0.03570966280499644,
        0.033104653420490585, 0.030370202575885057, 0.029820076370461458, 0.026794382240631673,
        0.024092291761051064, 0.023056760080253706, 0.02197268785191897, 0.020888615623584236, 
        0.01770111966862986, 0.016859750177982007, 0.014610704808750243, 0.01310594783509158, 
        0.01130994757620866, 0.010193514982849006, 0.009352145492201152, 0.008899100381852307,
        0.007281082130606433, 0.0068280370202575885, 0.005436541324186137, 0.005032036761374668,
        0.004271568183289108, 0.004012685263089768, 0.0035920005177658403, 0.0028315319396802797,
        0.0022005048216943886, 0.002006342631544884, 0.0019092615364701313, 0.0016989191638081677,
        0.0013429551485340755, 0.0010840722283347356, 0.0009869911332599831, 0.0007604685780855608,
        0.0007766487605980196, 0.0005177658403986797, 0.000501585657886221, 0.00017798200763704614,
        0.00014562164261212868, 0.00029124328522425736, 0.00017798200763704614, 0.00017798200763704614,
        0.00012944146009966992, 0.00014562164261212868, 6.472073004983496e-05, 3.236036502491748e-05, 
        4.8540547537376224e-05, 4.8540547537376224e-05, 4.8540547537376224e-05, 1.618018251245874e-05, 
        1.618018251245874e-05, 3.236036502491748e-05, 1.618018251245874e-05]


unique_t_x1=[1.0, 1.6102620275609394, 2.592943797404667, 3.2903445623126686, 4.1753189365604015, 
             5.298316906283708, 6.7233575364993365, 8.531678524172808, 10.826367338740546,
             13.73823795883263, 17.43328822199988, 22.122162910704493, 28.072162039411772, 
             35.62247890262442, 45.20353656360243, 57.36152510448679, 72.7895384398315, 
             92.36708571873861, 117.21022975334806, 148.73521072935117]
unique_t_y1=[2.1989611207303636, 2.5113062304546547, 2.7424323520666074, 3.0262438490978676,
             3.2841482859420674, 3.535244664798448, 3.751489484255252, 3.9471362878821727, 
             4.090891884125566, 3.9201397262283404, 4.633696853101172, 5.617016982764248, 
             6.776987119603961, 6.954034554588846, 8.164423309400307, 8.345426006473586, 
             9.733638689784588, 11.160409992739531, 13.687707403518289, 16.03405963710752]
unique_t_x2=[1.0, 1.6102620275609394, 2.592943797404667, 3.2903445623126686, 4.1753189365604015,
             5.298316906283708, 6.7233575364993365, 8.531678524172808, 10.826367338740546, 
             13.73823795883263, 17.43328822199988, 22.122162910704493, 28.072162039411772, 
             35.62247890262442, 45.20353656360243, 57.36152510448679, 72.7895384398315, 
             92.36708571873861, 117.21022975334806, 148.73521072935117, 188.73918221350976, 
             239.5026619987486, 303.9195382313198, 385.6620421163472, 489.3900918477494, 621.0169418915616]
unique_t_y2=[1.8264792899408284, 1.958397534668721, 2.0482561965343278, 2.1277641277641277, 
             2.211267605633803, 2.27002700270027, 2.3198617147867218, 2.296405640486836, 
             2.3085170181930916, 2.5039338149011394, 2.7572492250468925, 3.049676903672933, 
             3.3521901168051644, 3.530775898742948, 4.004190198460216, 4.296661537483245,
             4.847578583509793, 5.395380892637741, 6.0551363575367985, 6.836325928475588,
             7.9533491102551555, 9.3464082009809, 10.792480113816234, 12.564352933194055, 
             14.427678543808867, 16.2489206611477]



#normal
def func1(x,mu,sigma):
    return np.exp(-((x - mu)**2)/(2*sigma**2)) / (sigma * np.sqrt(2*np.pi))

def func2(x, a,b1,b2,c):
    return a*pow(x+c,-b1)*np.exp((-b2)*x)

#泊松    
def func3(x, a):
    return (a**x/factorial(x)) * np.exp(-a)

#幂律 
def func4(x, a, b):
    return a*pow(x,b)

def func5(x, a,b1,b2):
    return a*pow(x,-b1)*np.exp((-b2)*x)
def func6(x, a, b):
    return a * x + b

def func7(x, a, b):
    return a * np.log(x) + b



f_family='Arial'
size_x=8
size_y=6
alpha_xy=1
fig	=	plt.figure(figsize=(size_x, size_y))
ax1	=	fig.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func4, unique_t_x2[10:],unique_t_y2[10:])
y888= [func4(i, *popt) for i in unique_t_x2[0:]]
ax1.scatter(unique_t_x2,unique_t_y2,label=r'D3, $\mu$=%.2f'%popt[1],alpha=alpha_xy)
ax1.plot(unique_t_x2[0:],y888,c='b',linestyle='-')
popt, pcov = curve_fit(func4, unique_t_x1[10:],unique_t_y1[10:])
y777 = [func4(i, *popt) for i in unique_t_x1[0:]]
ax1.scatter(unique_t_x1,unique_t_y1,label=r'D4, $\mu$=%.2f'%popt[1],alpha=alpha_xy)
ax1.plot(unique_t_x1[0:],y777,c='orange',linestyle='-')
ax1.plot([24,24],[1,100],color='k',linestyle='--')
ax1.plot([168,168],[1,100],color='k',linestyle='--')
ax1.plot([720,720],[1,100],color='k',linestyle='--')
ax1.text(19, 70,r'Day', size = 18,family=f_family)
ax1.text(120, 70,r'Week', size = 18,family=f_family)
ax1.text(400, 70,r'Month', size = 18,family=f_family)
ax1.set_yscale('log')
ax1.set_xscale('log')
ax1.set_xlim([1,1000])
ax1.set_ylim([1.6,100])
ax1.legend(loc=2,handletextpad=0.1,prop={'size':18,'family':f_family})
ax1.set_xlabel('t(h)',size=18,family=f_family) 
ax1.set_ylabel(r'S(t)',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/sf_4_nj1.pdf',bbox_inches='tight') 


fig2	=	plt.figure(figsize=(size_x, size_y))
ax2	=	fig2.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func4, rank_x2,rank_y2,maxfev = 10000)
y888 = [func4(i, *popt) for i in rank_x2]
ax2.errorbar(rank_x2,rank_y2,fmt="o",yerr = rank_std2,label=r'D3, $\xi$=%.2f'%-popt[1])
ax2.plot(rank_x2,y888,color='b',linestyle='-',linewidth=2)
popt, pcov = curve_fit(func4, rank_x[:],rank_y[:],maxfev = 10000)
y777 = [func4(i, *popt) for i in rank_x]
ax2.errorbar(rank_x,rank_y,fmt="o",yerr = rank_std,label=r'D4, $\xi$=%.2f'%-popt[1])
ax2.plot(rank_x,y777,c='orange',linestyle='-',linewidth=2)
ax2.set_yscale('log')
ax2.set_xscale('log')
ax2.set_ylim([0.001,1])
ax2.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax2.set_xlabel('log'+r'$_{10}L$',size=18,family=f_family) 
ax2.set_ylabel('log'+r'$_{10}P(L)$',size=18,family=f_family) 
#plt.savefig('C:/python/摩拜单车/draw2/sf_4_nj2.pdf',bbox_inches='tight') 


fig3	=	plt.figure(figsize=(size_x, size_y))
ax3	=	fig3.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func5, ith_x2[:],ith_y2[:],maxfev = 1000000)
y888 = [func5(i, *popt) for i in ith_x2]
#ax1.scatter(x_bike,y_bike,label='bike')
ax3.scatter(ith_x2,ith_y2,label=r'D3, $\alpha$=%.2f'%popt[1])
ax3.plot(ith_x2,y888,color='b',linestyle='-')
popt, pcov = curve_fit(func5, ith_x[:], ith_y[:],maxfev = 10000)
y777 = [func5(i, *popt) for i in ith_x]
ax3.scatter(ith_x,ith_y,label=r'D4, $\alpha$=%.2f'%popt[1])
ax3.plot(ith_x,y777,c='orange',linestyle='-')
ax3.set_ylim([-0.04,0.64])
#ax3.set_yscale('log')
#ax3.set_xscale('log')
#ax3.set_ylim([0.000001,1])
#ax3.set_xlim([0.5,150])
#ax3.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax3.set_xlabel(r'i$^{th}$ trip',size=18,family=f_family)  
ax3.set_ylabel(r'$P(i)$',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/sf_4_nj3.pdf',bbox_inches='tight') 


fig4	=	plt.figure(figsize=(size_x, size_y))
ax4	=	fig4.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func1, trips_x2[:],trips_y2[:],maxfev = 10000)
y888 = [func1(i, *popt) for i in trips_x2]
ax4.scatter(trips_x2,trips_y2,label=r'D3, $\mu$=%.2f, $\sigma$=%.2f'%(popt[0],popt[1]),alpha=alpha_xy)
ax4.plot(trips_x2,y888,color='b',linestyle='-')
popt, pcov = curve_fit(func1, trips_x[:],trips_y[:],maxfev = 10000)
y777 = [func1(i, *popt) for i in trips_x]
ax4.scatter(trips_x,trips_y,label=r'D4, $\mu$=%.2f, $\sigma$=%.2f'%(popt[0],popt[1]),alpha=alpha_xy)
ax4.plot(trips_x,y777,c='orange',linestyle='-')
ax4.set_yscale('log')
ax4.set_xscale('log')
ax4.set_ylim([0.000001,1])
ax4.set_xlim([0.8,160])
ax4.legend(loc=3,handletextpad=0.1,prop={'size':20,'family':f_family})
ax4.set_xlabel('log'+r'$_{10}$'+'#trips',size=18,family=f_family)  
ax4.set_ylabel('log'+r'$_{10}P$(#)',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/sf_4_nj4.pdf',bbox_inches='tight') 


fig5	=	plt.figure(figsize=(size_x, size_y))
ax5	=	fig5.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func3, gy_x2[:],gy_y2[:],maxfev = 10000)
y888 = [func3(i, *popt) for i in gy_x2]
ax5.scatter(gy_x2,gy_y2,label=r'D3, $\lambda$=%.2f'%popt[0],alpha=alpha_xy)
ax5.plot(gy_x2,y888,color='b',linestyle='-')
popt, pcov = curve_fit(func3, gy_x[:],gy_y[:],maxfev = 100000)
y777 = [func3(i, *popt) for i in gy_x]
ax5.scatter(gy_x,gy_y,label=r'D4, $\lambda$=%.2f'%popt[0])
ax5.plot(gy_x,y777,c='orange',linestyle='-')
ax5.set_yscale('log')
ax5.set_xscale('log')
ax5.set_ylim([0.000001,1])
ax5.legend(loc=3,handletextpad=0.1,prop={'size':18,'family':f_family})
ax5.set_xlabel('log'+r'$_{10}r_g$'+'(km)',size=18,family=f_family) 
ax5.set_ylabel('log'+r'$_{10}P(r_g)$',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/sf_4_nj5.pdf',bbox_inches='tight') 


fig6	=	plt.figure(figsize=(size_x, size_y))
ax6	=	fig6.add_subplot(1,	1,	1)
plt.yticks(fontproperties = f_family)
plt.xticks(fontproperties = f_family) 
plt.tick_params(labelsize=18)
popt, pcov = curve_fit(func4, dis_x2[5:],dis_y2[5:],maxfev = 10000)
y888 = [func4(i, *popt) for i in dis_x2]
ax6.scatter(dis_x2,dis_y2,label=r'D3, $\xi$=%.2f'%-popt[1],alpha=alpha_xy)
ax6.plot(dis_x2,y888,color='b',linestyle='-')
popt, pcov = curve_fit(func4, dis_x1[5:-2],dis_y1[5:-2])
y777 = [func4(i, *popt) for i in dis_x1[:]]
ax6.scatter(dis_x1[:],dis_y1[:],label=r'D4, $\xi$=%.2f'%-popt[1],alpha=alpha_xy)
ax6.plot(dis_x1[:],y777,c='orange',linestyle='-')
ax6.set_yscale('log')
ax6.set_xscale('log')
ax6.set_ylim([0.000001,1])
ax6.set_xlim([0.1,50])
ax6.legend(loc=1,handletextpad=0.1,prop={'size':18,'family':f_family})
ax6.set_xlabel('log'+r'$_{10}\langle d \rangle$'+'(km)',size=18,family=f_family) 
ax6.set_ylabel('log'+r'$_{10}P(\langle d \rangle)$',size=18,family=f_family)
#plt.savefig('C:/python/摩拜单车/draw2/sf_4_nj6.pdf',bbox_inches='tight') 
 




